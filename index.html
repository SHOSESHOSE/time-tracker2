<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2196F3">
  <title>作業時間トラッカー</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- ユーザー表示エリア -->
  <div id="userBar" style="margin-bottom:12px;">
    ユーザー：<strong id="userNameLabel">未設定</strong>
    <button id="changeUserBtn" type="button">名前を変更</button>
  </div>

  <div class="container">
    <header>
      <h1>作業時間トラッカー</h1>
      <div class="date-selector">
        <button id="prevDay" class="nav-btn" type="button">◀</button>
        <input type="date" id="dateInput">
        <button id="nextDay" class="nav-btn" type="button">▶</button>
      </div>
    </header>

    <div class="current-status" id="currentStatus">
      <div class="status-text">停止中</div>
    </div>

    <div class="category-buttons">
      <button class="category-btn" type="button" data-category="移動" style="background: #FF6B6B;">🚗 移動</button>
      <button class="category-btn" type="button" data-category="見積" style="background: #4ECDC4;">📝 見積</button>
      <button class="category-btn" type="button" data-category="現場" style="background: #FFE66D;">🏗️ 現場</button>
      <button class="category-btn" type="button" data-category="事務" style="background: #95E1D3;">🤖 事務</button>
      <button class="category-btn" type="button" data-category="休憩" style="background: #A8E6CF;">☕ 休憩</button>
    </div>

    <button id="stopBtn" class="stop-btn" type="button">⏹ 停止</button>

    <div class="summary" id="summary"></div>

    <div class="logs-section">
      <div class="logs-header">
        <h2>作業ログ</h2>
        <div style="display:flex; gap:8px; flex-wrap: wrap;">
          <button id="exportCsv" class="export-btn" type="button">📊 日次CSV</button>
          <button id="exportCsvMonth" class="export-btn" type="button">🗓️ 月次CSV</button>
          <button id="addLogBtn" class="export-btn" type="button">＋ 手入力追加</button>
        </div>
      </div>

      <div id="logsList" class="logs-list"></div>
    </div>
  </div>

  <div id="editModal" class="modal">
    <div class="modal-content">
      <h3>ログ編集</h3>

      <div class="form-group">
        <label>カテゴリ</label>
        <select id="editCategory">
          <option value="移動">🚗 移動</option>
          <option value="見積">📝 見積</option>
          <option value="現場">🏗️ 現場</option>
          <option value="事務">🤖 事務</option>
          <option value="休憩">☕ 休憩</option>
        </select>
      </div>

      <div class="form-group">
        <label>開始時刻</label>
        <input type="time" id="editStartTime">
      </div>

      <div class="form-group">
        <label>終了時刻</label>
        <input type="time" id="editEndTime">
      </div>

      <div class="modal-actions">
        <button id="saveEdit" class="btn-primary" type="button">保存</button>
        <button id="deleteLog" class="btn-danger" type="button">削除</button>
        <button id="cancelEdit" class="btn-secondary" type="button">キャンセル</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
